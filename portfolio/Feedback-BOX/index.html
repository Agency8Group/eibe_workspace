<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Feedback Box</title>
        <link
            href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
            rel="stylesheet"
        />
        <link
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
            rel="stylesheet"
        />
        <link
            href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap"
            rel="stylesheet"
        />
        <style>
            :root {
                --primary-color: #0f172a;
                --primary-light: #f1f5f9;
                --accent-color: #6366f1;
                --bg-light: #fafafa;
                --text-dark: #0f172a;
                --text-subtle: #475569;
                --font-family: "Noto Sans KR", -apple-system, BlinkMacSystemFont,
                    "Segoe UI", Roboto, sans-serif;
                --card-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
                    0 1px 2px 0 rgba(0, 0, 0, 0.06);
                --card-shadow-hover: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04);
                --premium-gradient: linear-gradient(
                    135deg,
                    #667eea 0%,
                    #764ba2 100%
                );
                --gold-gradient: linear-gradient(
                    135deg,
                    #f093fb 0%,
                    #f5576c 100%
                );
            }

            body {
                background: linear-gradient(
                    135deg,
                    #fafafa 0%,
                    #f1f5f9 50%,
                    #e2e8f0 100%
                );
                color: var(--text-dark);
                font-family: var(--font-family);
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
                min-height: 100vh;
                position: relative;
                scroll-behavior: smooth;
            }

            body::before {
                content: "";
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: radial-gradient(
                        circle at 20% 80%,
                        rgba(120, 119, 198, 0.1) 0%,
                        transparent 50%
                    ),
                    radial-gradient(
                        circle at 80% 20%,
                        rgba(255, 119, 198, 0.1) 0%,
                        transparent 50%
                    ),
                    radial-gradient(
                        circle at 40% 40%,
                        rgba(120, 219, 255, 0.1) 0%,
                        transparent 50%
                    );
                pointer-events: none;
                z-index: -1;
            }

            .fade-in {
                animation: fadeIn 1s cubic-bezier(0.4, 0, 0.2, 1);
            }

            @keyframes fadeIn {
                from {
                    opacity: 0;
                    transform: translateY(30px) scale(0.95);
                }
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }

            @keyframes fadeInCentered {
                from {
                    opacity: 0;
                    transform: translate(-50%, calc(-50% + 20px)) scale(0.95);
                }
                to {
                    opacity: 1;
                    transform: translate(-50%, -50%) scale(1);
                }
            }

            .fade-in-centered {
                animation: fadeInCentered 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .gradient-bg {
                background: var(--premium-gradient);
                transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
                box-shadow: 0 4px 6px -1px rgba(102, 126, 234, 0.2);
                border: 1px solid rgba(255, 255, 255, 0.1);
            }

            .gradient-bg::before {
                content: "";
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    90deg,
                    transparent,
                    rgba(255, 255, 255, 0.2),
                    transparent
                );
                transition: 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .gradient-bg:hover::before {
                left: 100%;
            }

            .gradient-bg:hover {
                background: var(--gold-gradient);
                transform: translateY(-3px) scale(1.02);
                box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
            }

            .gradient-bg:active {
                transform: translateY(-1px) scale(1.01);
                box-shadow: 0 10px 20px rgba(102, 126, 234, 0.2);
            }

            .emotion-btn {
                width: 70px;
                height: 70px;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 50%;
                background: linear-gradient(
                    135deg,
                    rgba(255, 255, 255, 0.9),
                    rgba(248, 250, 252, 0.9)
                );
                transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
                font-size: 2.2rem;
                cursor: pointer;
                border: 2px solid rgba(255, 255, 255, 0.3);
                box-shadow: var(--card-shadow);
                backdrop-filter: blur(10px);
                position: relative;
                overflow: hidden;
            }

            .emotion-btn::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(
                    135deg,
                    rgba(255, 255, 255, 0.2),
                    transparent
                );
                border-radius: 50%;
                opacity: 0;
                transition: opacity 0.3s ease;
            }

            .emotion-btn:hover::before {
                opacity: 1;
            }

            .emotion-btn:hover {
                transform: scale(1.08) translateY(-2px);
                box-shadow: var(--card-shadow-hover);
                border-color: rgba(102, 126, 234, 0.3);
            }

            .emotion-btn.selected {
                background: var(--premium-gradient);
                border-color: rgba(255, 255, 255, 0.5);
                transform: scale(1.08);
                box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
                color: white;
            }

            .loading-spinner {
                border: 3px solid rgba(255, 255, 255, 0.3);
                border-radius: 50%;
                border-top: 3px solid white;
                width: 24px;
                height: 24px;
                animation: spin 1s linear infinite;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
            }

            @keyframes spin {
                0% {
                    transform: rotate(0deg);
                }
                100% {
                    transform: rotate(360deg);
                }
            }

            .card-hover {
                transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
                background: rgba(255, 255, 255, 0.8);
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                position: relative;
                overflow: hidden;
            }

            .card-hover::before {
                content: "";
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    90deg,
                    transparent,
                    rgba(255, 255, 255, 0.1),
                    transparent
                );
                transition: 0.6s ease;
            }

            .card-hover:hover::before {
                left: 100%;
            }

            .card-hover:hover {
                transform: translateY(-5px) scale(1.02);
                box-shadow: var(--card-shadow-hover);
                background: rgba(255, 255, 255, 0.95);
                border-color: rgba(102, 126, 234, 0.2);
            }

            .elegant-input {
                background: rgba(255, 255, 255, 0.7);
                border: 1px solid rgba(203, 213, 225, 0.3);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                backdrop-filter: blur(10px);
            }

            .elegant-input:focus {
                background: rgba(255, 255, 255, 0.95);
                border-color: var(--accent-color);
                box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
                transform: translateY(-1px);
            }

            .header-gradient {
                background: linear-gradient(
                    135deg,
                    rgba(255, 255, 255, 0.9),
                    rgba(248, 250, 252, 0.9)
                );
                backdrop-filter: blur(20px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            }

            .message-container {
                background: linear-gradient(
                    135deg,
                    rgba(102, 126, 234, 0.1),
                    rgba(118, 75, 162, 0.1)
                );
                backdrop-filter: blur(20px);
                border: 1px solid rgba(102, 126, 234, 0.2);
                box-shadow: 0 8px 32px rgba(102, 126, 234, 0.1);
            }

            .premium-text {
                background: var(--premium-gradient);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
            }

            #success-msg {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 100;
                background: linear-gradient(
                    135deg,
                    rgba(255, 255, 255, 0.9),
                    rgba(248, 250, 252, 0.9)
                );
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            }

            @media (max-width: 640px) {
                .emotion-btn {
                    width: 60px;
                    height: 60px;
                    font-size: 1.8rem;
                }
                .container {
                    padding-left: 1rem;
                    padding-right: 1rem;
                }
            }
        </style>
    </head>
    <body class="min-h-screen text-gray-800">
        <div class="container mx-auto px-4 py-8 max-w-4xl">
            <!-- í—¤ë” ì„¹ì…˜ -->
            <header class="text-center mb-12 fade-in">
                <h1 class="text-4xl font-bold mb-4 premium-text">
                    <i class="fas fa-comments mr-2"></i>
                    Feedback Box
                </h1>
                <p class="text-lg text-gray-600">
                    ì¡°ì§ ê°œì„ ì„ ìœ„í•œ ìµëª… í”¼ë“œë°± ìˆ˜ì§‘ í”Œë«í¼ì…ë‹ˆë‹¤.
                </p>
            </header>

            <!-- ì„¤ëª… ì„¹ì…˜ -->
            <div class="header-gradient rounded-xl shadow-lg p-6 mb-8 fade-in">
                <div class="flex items-center justify-center space-x-4">
                    <i class="fas fa-shield-alt text-3xl text-blue-600"></i>
                    <div>
                        <h2 class="text-xl font-semibold text-gray-800 mb-2">
                            ì•ˆì „í•œ ìµëª… í”¼ë“œë°±!
                        </h2>
                        <p class="text-gray-600">
                            ëª¨ë“  ì‘ë‹µì€ ìµëª…ì´ë©°, ë‚´ë¶€ ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™•ì¸ë©ë‹ˆë‹¤:)
                        </p>
                    </div>
                </div>
            </div>

            <!-- ëœë¤ ë©”ì‹œì§€ -->
            <div
                id="random-message"
                class="message-container text-center text-gray-600 mb-8 text-2xl font-medium p-6 rounded-xl shadow-md"
                style="
                    font-family: 'Noto Sans KR', sans-serif;
                    opacity: 1;
                    transform: translateY(0);
                    transition: all 0.5s ease-in-out;
                "
            ></div>

            <!-- í”¼ë“œë°± í¼ -->
            <form id="feedback-form" class="space-y-6">
                <!-- ê°ì •ë°” -->
                <div
                    class="header-gradient rounded-xl shadow-lg p-6 mb-8 fade-in"
                >
                    <label class="block text-gray-700 mb-4 text-lg"
                        >ì§€ê¸ˆ ë‚´ ë§ˆìŒì„ í‘œí˜„í•˜ëŠ” ëŠë‚Œì„ ì„ íƒí•´ì£¼ì„¸ìš”</label
                    >
                    <div class="flex justify-center space-x-6 sm:space-x-8">
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="angry"
                        >
                            ğŸ˜¡
                        </button>
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="neutral"
                        >
                            ğŸ˜
                        </button>
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="happy"
                        >
                            ğŸ™‚
                        </button>
                        <button
                            type="button"
                            class="emotion-btn"
                            data-emotion="love"
                        >
                            ğŸ˜
                        </button>
                    </div>
                    <input
                        type="hidden"
                        name="emotion"
                        id="selected-emotion"
                        required
                    />
                </div>

                <!-- ì§ˆë¬¸ ì¹´ë“œë“¤ -->
                <div class="space-y-6">
                    <div class="card-hover rounded-xl shadow-lg p-6">
                        <label class="block text-gray-700 font-medium mb-3"
                            >ìš”ì¦˜ ì—…ë¬´í•˜ë©´ì„œ ê°€ì¥ ë¶€ë‹´ë˜ê±°ë‚˜ í”¼ë¡œí•œ ì§€ì ì€
                            ë¬´ì—‡ì¸ê°€ìš”? (ì—…ë¬´, ì†Œí†µ, êµ¬ì¡° ë“± ììœ ë¡­ê²Œ)</label
                        >
                        <input
                            name="q1"
                            type="text"
                            class="elegant-input w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            required
                        />
                    </div>

                    <div class="card-hover rounded-xl shadow-lg p-6">
                        <label class="block text-gray-700 font-medium mb-3"
                            >ìµœê·¼ í˜‘ì—…í•˜ë©° ê¸ì •ì ì¸ ì¸ìƒì„ ë°›ì•˜ë˜ íŒ€/ë¶€ì„œëŠ”
                            ì–´ë””ì¸ê°€ìš”? ê·¸ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€ìš”?</label
                        >
                        <textarea
                            name="q2"
                            class="elegant-input w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="3"
                            required
                        ></textarea>
                    </div>

                    <div class="card-hover rounded-xl shadow-lg p-6">
                        <label class="block text-gray-700 font-medium mb-3"
                            >ìš°ë¦¬ íšŒì‚¬ê°€ ë” ë‚˜ì•„ì§€ê¸° ìœ„í•´ ê°€ì¥ ë¨¼ì € ë°”ê¿”ì•¼ í•  í•œ
                            ê°€ì§€ëŠ” ë¬´ì—‡ì´ë¼ê³  ìƒê°í•˜ì‹œë‚˜ìš”?</label
                        >
                        <textarea
                            name="q3"
                            class="elegant-input w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="2"
                        ></textarea>
                    </div>

                    <div class="card-hover rounded-xl shadow-lg p-6">
                        <label class="block text-gray-700 font-medium mb-3"
                            >íšŒì‚¬ë¥¼ í•œ ë‹¨ì–´ë¡œ í‘œí˜„í•œë‹¤ë©´? ê·¸ë¦¬ê³  ê·¸ ì´ìœ ëŠ”
                            ë¬´ì—‡ì¸ê°€ìš”?</label
                        >
                        <input
                            name="q4"
                            type="text"
                            class="elegant-input w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                        />
                    </div>

                    <div class="card-hover rounded-xl shadow-lg p-6">
                        <label class="block text-gray-700 font-medium mb-3"
                            >ìµœê·¼ ì—…ë¬´ ì¤‘ ê¸°ë¶„ì´ ì¢‹ì•˜ë˜ ìˆœê°„ì´ ìˆë‹¤ë©´, ì–´ë–¤
                            ì¼ì´ì—ˆë‚˜ìš”?</label
                        >
                        <textarea
                            name="q5"
                            class="elegant-input w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="3"
                        ></textarea>
                    </div>

                    <div class="card-hover rounded-xl shadow-lg p-6">
                        <label class="block text-gray-700 font-medium mb-3"
                            >ê°œì„ ì„ ìœ„í•´ í•˜ê³  ì‹¶ì€ ì œì•ˆì´ë‚˜ ì•„ì´ë””ì–´ê°€ ìˆë‹¤ë©´
                            ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”.</label
                        >
                        <textarea
                            name="q6"
                            class="elegant-input w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="4"
                        ></textarea>
                    </div>

                    <div class="card-hover rounded-xl shadow-lg p-6">
                        <label class="block text-gray-700 font-medium mb-3"
                            >í•¨ê»˜ ì¼í•˜ê³  ì‹¶ì€ ì‚¬ëŒì€ ì–´ë–¤ íŠ¹ì„±ì„ ê°€ì§„
                            ì‚¬ëŒì¸ê°€ìš”?</label
                        >
                        <textarea
                            name="q7"
                            class="elegant-input w-full px-4 py-2 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
                            rows="2"
                        ></textarea>
                    </div>
                </div>

                <!-- ì œì¶œ ë²„íŠ¼ -->
                <div class="text-center mt-12">
                    <button
                        type="submit"
                        id="submit-btn"
                        class="gradient-bg text-white px-12 py-4 rounded-xl transform hover:scale-105 transition-all font-medium text-lg disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        <span class="loading-spinner hidden"></span>
                        <i class="fas fa-paper-plane mr-3"></i>
                        <span class="button-text">ì œì¶œí•˜ê¸°</span>
                    </button>
                </div>
            </form>

            <!-- ì„±ê³µ ë©”ì‹œì§€ -->
            <div
                id="success-msg"
                class="hidden text-gray-800 p-8 rounded-2xl text-center font-medium fade-in-centered"
            >
                <div class="flex flex-col items-center justify-center">
                    <i
                        class="fas fa-check-circle text-4xl mb-4 text-green-500"
                    ></i>
                    <p class="text-lg">
                        í”¼ë“œë°±ì´ ì œì¶œë˜ì—ˆìŠµë‹ˆë‹¤.<br />ê°ì‚¬í•©ë‹ˆë‹¤!
                    </p>
                </div>
            </div>

            <!-- í‘¸í„° -->
        </div>

        <script>
            // í˜ì´ì§€ ë¡œë“œ ì‹œ ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ
            window.addEventListener("load", function () {
                window.scrollTo(0, 0);
            });

            // DOMContentLoaded ì‹œì—ë„ ìŠ¤í¬ë¡¤ì„ ë§¨ ìœ„ë¡œ
            document.addEventListener("DOMContentLoaded", function () {
                window.scrollTo(0, 0);
            });

            // ëœë¤ ë©”ì‹œì§€ í‘œì‹œ
            const messages = [
                "ì†”ì§í•œ ì˜ê²¬ì„ í™˜ì˜í•©ë‹ˆë‹¤.",
                "ì‘ì€ ë§ë¡œ í° ë³€í™”ë¥¼ ë§Œë“­ë‹ˆë‹¤.",
                "ì˜ê²¬ì€ ì €ì¥ë˜ì§€ ì•Šê³  ë³€í™”ë¡œ ë‚¨ìŠµë‹ˆë‹¤.",
            ];

            function updateRandomMessage() {
                const messageElement =
                    document.getElementById("random-message");

                // í˜„ì¬ ë©”ì‹œì§€ì™€ ë‹¤ë¥¸ ë©”ì‹œì§€ê°€ ë‚˜ì˜¬ ë•Œê¹Œì§€ ë°˜ë³µ
                let newMessage;
                do {
                    newMessage =
                        messages[Math.floor(Math.random() * messages.length)];
                } while (
                    newMessage === messageElement.textContent &&
                    messages.length > 1
                );

                // í˜ì´ë“œ ì•„ì›ƒ
                messageElement.style.opacity = "0";
                messageElement.style.transform = "translateY(20px)";

                // í˜ì´ë“œ ì¸
                setTimeout(() => {
                    messageElement.textContent = newMessage;
                    messageElement.style.opacity = "1";
                    messageElement.style.transform = "translateY(0)";
                }, 500);
            }

            // ì´ˆê¸° ë©”ì‹œì§€ í‘œì‹œ
            updateRandomMessage();

            // 5ì´ˆë§ˆë‹¤ ë©”ì‹œì§€ ë³€ê²½
            setInterval(updateRandomMessage, 5000);

            // ê°ì • ì„ íƒ ì²˜ë¦¬ ê°œì„ 
            document.querySelectorAll(".emotion-btn").forEach((btn) => {
                btn.addEventListener("click", function () {
                    document
                        .querySelectorAll(".emotion-btn")
                        .forEach((b) => b.classList.remove("selected"));
                    this.classList.add("selected");
                    document.getElementById("selected-emotion").value =
                        this.dataset.emotion;
                });
            });

            // í¼ ì œì¶œ ì²˜ë¦¬ ê°œì„ 
            document
                .getElementById("feedback-form")
                .addEventListener("submit", async function (e) {
                    e.preventDefault();

                    const submitBtn = document.getElementById("submit-btn");
                    const spinner = submitBtn.querySelector(".loading-spinner");
                    const buttonText = submitBtn.querySelector(".button-text");

                    // ì œì¶œ ì „ ìœ íš¨ì„± ê²€ì‚¬
                    const emotion =
                        document.getElementById("selected-emotion").value;
                    if (!emotion) {
                        alert("ê°ì •ì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
                        return;
                    }

                    // ë²„íŠ¼ ë¹„í™œì„±í™” ë° ë¡œë”© í‘œì‹œ
                    submitBtn.disabled = true;
                    spinner.classList.remove("hidden");
                    buttonText.textContent = "ì œì¶œ ì¤‘...";

                    const formData = new FormData(e.target);
                    const payload = {
                        emotion: formData.get("emotion"),
                        q1: formData.get("q1"),
                        q2: formData.get("q2"),
                        q3: formData.get("q3"),
                        q4: formData.get("q4"),
                        q5: formData.get("q5"),
                        q6: formData.get("q6"),
                        q7: formData.get("q7"),
                    };

                    try {
                        const response = await fetch(
                            "https://script.google.com/macros/s/AKfycbzBp5febUlf4MnIblnkiQRIMu8QajNrh1sBGGMR-r3og3rrEbZiUMbhUFHN4PyoV21e/exec",
                            {
                                method: "POST",
                                mode: "no-cors",
                                headers: {
                                    "Content-Type": "text/plain",
                                },
                                body: JSON.stringify(payload),
                            }
                        );

                        // í¼ ì´ˆê¸°í™”
                        e.target.reset();
                        document
                            .querySelectorAll(".emotion-btn")
                            .forEach((btn) => btn.classList.remove("selected"));
                        document.getElementById("selected-emotion").value = "";

                        // ì„±ê³µ ë©”ì‹œì§€ í‘œì‹œ
                        document
                            .getElementById("success-msg")
                            .classList.remove("hidden");

                        // 5ì´ˆ í›„ ì„±ê³µ ë©”ì‹œì§€ ìˆ¨ê¸°ê¸°
                        setTimeout(() => {
                            document
                                .getElementById("success-msg")
                                .classList.add("hidden");
                        }, 10000);
                    } catch (error) {
                        alert("ì œì¶œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
                    } finally {
                        // ë²„íŠ¼ ìƒíƒœ ë³µêµ¬
                        submitBtn.disabled = false;
                        spinner.classList.add("hidden");
                        buttonText.textContent = "ì œì¶œí•˜ê¸°";
                    }
                });
        </script>
    </body>
</html>
