<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>전사 공용 캘린더</title>
        <script src="https://cdn.tailwindcss.com"></script>
        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        colors: {
                            company: "#EF4444", // 회사전체 - 빨간색
                            aptamil: "#3B82F6", // 압타밀 - 파란색
                            dreame: "#1F2937", // 드리미 - 검은색
                            brighton: "#F59E0B", // bt몰 - 노란색
                            customer: "#EC4899", // 고객센터 - 핑크색
                            marketing: "#06B6D4", // 마케팅 - 청록색
                            content: "#84CC16", // 컨텐츠 - 연두색
                            meeting: "#EF4444", // 미팅 - 빨간색
                            holiday: "#10B981", // 휴무 - 초록색
                            event: "#F59E0B", // 이벤트 - 주황색
                            deadline: "#8B5CF6", // 마감일 - 보라색
                            notice: "#F97316", // 공지 - 주황색
                        },
                        animation: {
                            "fade-in": "fadeIn 0.5s ease-in-out",
                            "slide-up": "slideUp 0.3s ease-out",
                            "bounce-in": "bounceIn 0.6s ease-out",
                            "pulse-slow": "pulse 3s infinite",
                        },
                        keyframes: {
                            fadeIn: {
                                "0%": { opacity: "0" },
                                "100%": { opacity: "1" },
                            },
                            slideUp: {
                                "0%": {
                                    transform: "translateY(10px)",
                                    opacity: "0",
                                },
                                "100%": {
                                    transform: "translateY(0)",
                                    opacity: "1",
                                },
                            },
                            bounceIn: {
                                "0%": { transform: "scale(0.3)", opacity: "0" },
                                "50%": { transform: "scale(1.05)" },
                                "70%": { transform: "scale(0.9)" },
                                "100%": { transform: "scale(1)", opacity: "1" },
                            },
                        },
                    },
                },
            };
        </script>
        <style>
            /* 고급 Sans-serif 폰트 스택 */
            * {
                font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
                    "Roboto", "Helvetica Neue", "Arial", "Noto Sans", sans-serif,
                    "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol",
                    "Noto Color Emoji";
            }

            /* 기본 타이포그래피 개선 */
            body {
                font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
                text-rendering: optimizeLegibility;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            /* 제목 폰트 가중치 개선 */
            h1,
            h2,
            h3 {
                font-weight: 700;
                letter-spacing: -0.025em;
            }

            /* 버튼 텍스트 개선 */
            button {
                font-weight: 600;
                letter-spacing: 0.025em;
            }

            /* 이벤트 태그 텍스트 개선 */
            .event-tag {
                font-size: 0.75rem;
                padding: 4px 8px;
                border-radius: 6px;
                margin: 2px 0;
                display: block;
                width: 100%;
                overflow: hidden;
                text-overflow: ellipsis;
                transition: all 0.2s ease;
                position: relative;
                border: 1px solid rgba(255, 255, 255, 0.3);
                box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
                word-wrap: break-word;
                white-space: normal;
                line-height: 1.2;
                max-height: none;
            }

            .event-tag:hover {
                transform: translateX(1px);
                box-shadow: 0 2px 4px 0 rgba(0, 0, 0, 0.1);
            }

            .event-tag.bg-company {
                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            }

            .event-tag.bg-aptamil {
                background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
            }

            .event-tag.bg-dreame {
                background: linear-gradient(135deg, #1f2937 0%, #111827 100%);
            }

            .event-tag.bg-brighton {
                background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            }

            .event-tag.bg-customer {
                background: linear-gradient(135deg, #ec4899 0%, #db2777 100%);
            }

            .event-tag.bg-marketing {
                background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            }

            .event-tag.bg-content {
                background: linear-gradient(135deg, #84cc16 0%, #65a30d 100%);
            }

            .tooltip {
                position: fixed;
                background: #1f2937;
                color: white;
                padding: 8px 12px;
                border-radius: 6px;
                font-size: 0.875rem;
                z-index: 1000;
                pointer-events: none;
                opacity: 0;
                max-width: 250px;
                min-width: 200px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
                border: 1px solid #374151;
                word-wrap: break-word;
                word-break: break-word;
                overflow-wrap: break-word;
                white-space: normal;
                line-height: 1.4;
            }

            .tooltip.show {
                opacity: 1;
            }

            .glass-effect {
                background: rgba(255, 255, 255, 0.9);
                backdrop-filter: blur(10px);
                border: 1px solid rgba(226, 232, 240, 0.8);
                box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
                    0 1px 2px 0 rgba(0, 0, 0, 0.06);
            }

            .gradient-bg {
                background: linear-gradient(
                    135deg,
                    #ffffff 0%,
                    #f8fafc 50%,
                    #f1f5f9 100%
                );
            }

            .floating-card {
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
                    0 2px 4px -1px rgba(0, 0, 0, 0.06);
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            }

            .floating-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
                    0 4px 6px -2px rgba(0, 0, 0, 0.05);
            }

            .btn-modern {
                background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
                box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1),
                    0 1px 2px 0 rgba(0, 0, 0, 0.06);
            }

            .btn-modern::before {
                content: "";
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(
                    90deg,
                    transparent,
                    rgba(255, 255, 255, 0.2),
                    transparent
                );
                transition: left 0.5s;
            }

            .btn-modern:hover::before {
                left: 100%;
            }

            .btn-modern:hover {
                transform: translateY(-1px);
                box-shadow: 0 4px 6px -1px rgba(59, 130, 246, 0.3),
                    0 2px 4px -1px rgba(59, 130, 246, 0.2);
            }

            @media (max-width: 768px) {
                .calendar-day {
                    min-height: 120px;
                    padding: 8px !important;
                }

                .event-tag {
                    font-size: 0.625rem;
                    padding: 2px 4px;
                    margin: 1px 0;
                    display: block;
                    width: 100%;
                }

                .container {
                    padding-left: 8px !important;
                    padding-right: 8px !important;
                }

                h1 {
                    font-size: 1.875rem !important;
                    line-height: 2.25rem !important;
                }

                h2 {
                    font-size: 1.5rem !important;
                }

                h3 {
                    font-size: 1.25rem !important;
                }

                .p-8 {
                    padding: 1rem !important;
                }

                .space-x-6 > * + * {
                    margin-left: 1rem !important;
                }

                .space-x-4 > * + * {
                    margin-left: 0.75rem !important;
                }

                .space-x-3 > * + * {
                    margin-left: 0.5rem !important;
                }

                .grid-cols-4 {
                    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
                }

                .text-lg {
                    font-size: 0.875rem !important;
                }

                .text-xl {
                    font-size: 1rem !important;
                }

                .text-3xl {
                    font-size: 1.5rem !important;
                }

                .text-2xl {
                    font-size: 1.25rem !important;
                }

                .p-4 {
                    padding: 0.75rem !important;
                }

                .p-3 {
                    padding: 0.5rem !important;
                }

                .w-6 {
                    width: 1.25rem !important;
                }

                .h-6 {
                    height: 1.25rem !important;
                }

                .w-8 {
                    width: 1.5rem !important;
                }

                .h-8 {
                    height: 1.5rem !important;
                }

                .w-5 {
                    width: 1rem !important;
                }

                .h-5 {
                    height: 1rem !important;
                }

                .w-3 {
                    width: 0.5rem !important;
                }

                .h-3 {
                    height: 0.5rem !important;
                }

                .calendar-day .space-y-2 {
                    max-height: 80px;
                }
            }

            @media (max-width: 480px) {
                .calendar-day {
                    min-height: 100px;
                    padding: 6px !important;
                }

                .event-tag {
                    font-size: 0.5rem;
                    padding: 1px 3px;
                    display: block;
                    width: 100%;
                }

                .calendar-day .space-y-2 {
                    max-height: 70px;
                }
            }

            /* 텍스트 줄임표 처리 */
            .line-clamp-2 {
                display: -webkit-box;
                -webkit-line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .truncate {
                overflow: hidden;
                text-overflow: ellipsis;
                white-space: nowrap;
            }

            .calendar-grid {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
            }

            .calendar-day {
                min-height: 150px;
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
                position: relative;
                overflow: hidden;
                background: rgba(255, 255, 255, 0.95);
                border: 1px solid rgba(226, 232, 240, 0.8);
            }

            .calendar-day::before {
                content: "";
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: linear-gradient(
                    135deg,
                    rgba(59, 130, 246, 0.05) 0%,
                    rgba(59, 130, 246, 0.02) 100%
                );
                opacity: 0;
                transition: opacity 0.3s ease;
                pointer-events: none;
            }

            .calendar-day:hover::before {
                opacity: 1;
            }

            .calendar-day:hover {
                transform: translateY(-1px) scale(1.01);
                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1),
                    0 2px 4px -1px rgba(0, 0, 0, 0.06);
                z-index: 10;
            }

            /* 이벤트 컨테이너 스크롤 추가 */
            .calendar-day .space-y-2 {
                max-height: 100px;
                overflow-y: auto;
                scrollbar-width: thin;
                scrollbar-color: rgba(156, 163, 175, 0.5) transparent;
            }

            .calendar-day .space-y-2::-webkit-scrollbar {
                width: 4px;
            }

            .calendar-day .space-y-2::-webkit-scrollbar-track {
                background: transparent;
            }

            .calendar-day .space-y-2::-webkit-scrollbar-thumb {
                background: rgba(156, 163, 175, 0.5);
                border-radius: 2px;
            }

            .calendar-day .space-y-2::-webkit-scrollbar-thumb:hover {
                background: rgba(156, 163, 175, 0.7);
            }
        </style>
    </head>
    <body class="min-h-screen gradient-bg">
        <div class="container mx-auto px-4 py-8 max-w-7xl">
            <!-- 상단 공지사항 영역 -->
            <div
                class="glass-effect rounded-xl sm:rounded-2xl p-4 sm:p-8 mb-6 sm:mb-8 floating-card animate-slide-up"
            >
                <div class="flex justify-between items-center mb-4 sm:mb-6">
                    <h2
                        class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center"
                    >
                        <div
                            class="w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center mr-2 sm:mr-3 shadow-sm"
                        >
                            <svg
                                class="w-4 h-4 sm:w-5 sm:h-5 text-white"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z"
                                    clip-rule="evenodd"
                                ></path>
                            </svg>
                        </div>
                        중요 일정 & 오늘의 일정 알림
                    </h2>
                    <button
                        id="requestEventBtn"
                        class="px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-semibold text-sm hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-sm flex items-center space-x-2"
                    >
                        <svg
                            class="w-4 h-4"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 6v6m0 0v6m0-6h6m-6 0H6"
                            ></path>
                        </svg>
                        <span>일정 등록 요청</span>
                    </button>
                </div>

                <!-- 중요 일정 섹션 -->
                <div class="mb-6">
                    <h3
                        class="text-lg font-semibold text-gray-700 mb-3 flex items-center"
                    >
                        <svg
                            class="w-5 h-5 mr-2 text-orange-500"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"
                            ></path>
                        </svg>
                        중요 일정
                    </h3>
                    <div class="space-y-3">
                        <div
                            class="flex items-start space-x-3 p-3 bg-orange-50 rounded-lg border border-orange-200 shadow-sm"
                        >
                            <div
                                class="w-2 h-2 bg-gradient-to-r from-orange-400 to-red-500 rounded-full mt-1.5 flex-shrink-0 animate-pulse-slow"
                            ></div>
                            <div>
                                <p class="font-semibold text-gray-800 text-sm">
                                    연말연시 배송 일정 안내
                                </p>
                                <p class="text-gray-600 text-xs">
                                    12월 24일~1월 2일까지 배송 서비스 일시 중단
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 오늘의 일정 알림 섹션 -->
                <div>
                    <h3
                        class="text-lg font-semibold text-gray-700 mb-3 flex items-center justify-between"
                    >
                        <div class="flex items-center">
                            <svg
                                class="w-5 h-5 mr-2 text-green-500"
                                fill="none"
                                stroke="currentColor"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                                ></path>
                            </svg>
                            오늘의 일정 알림
                        </div>
                        <span class="text-xs text-gray-500 font-normal"
                            >매일 오전 08시 자동으로 팀룸에 전송됩니다.</span
                        >
                    </h3>
                    <div id="todayEventsList" class="space-y-3">
                        <!-- JavaScript로 동적 생성 -->
                    </div>
                </div>
            </div>

            <!-- 캘린더 컨트롤 -->
            <div
                class="flex flex-col sm:flex-row justify-between items-center mb-8 animate-slide-up gap-4"
            >
                <div class="flex items-center space-x-4 sm:space-x-6">
                    <button
                        id="prevMonth"
                        class="p-2 sm:p-3 rounded-xl bg-white border border-gray-200 hover:bg-gray-50 transition-all duration-300 group shadow-sm"
                    >
                        <svg
                            class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:scale-110 transition-transform"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M15 19l-7-7 7-7"
                            ></path>
                        </svg>
                    </button>
                    <h2
                        id="currentMonth"
                        class="text-2xl sm:text-3xl font-bold text-gray-800"
                    >
                        2024년 1월
                    </h2>
                    <button
                        id="nextMonth"
                        class="p-2 sm:p-3 rounded-xl bg-white border border-gray-200 hover:bg-gray-50 transition-all duration-300 group shadow-sm"
                    >
                        <svg
                            class="w-5 h-5 sm:w-6 sm:h-6 text-gray-600 group-hover:scale-110 transition-transform"
                            fill="none"
                            stroke="currentColor"
                            viewBox="0 0 24 24"
                        >
                            <path
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="M9 5l7 7-7 7"
                            ></path>
                        </svg>
                    </button>
                </div>
                <div class="flex items-center space-x-3">
                    <button
                        id="todayBtn"
                        class="px-4 sm:px-6 py-2 sm:py-3 btn-modern text-white rounded-xl font-semibold text-sm sm:text-base"
                    >
                        오늘
                    </button>
                </div>
            </div>

            <!-- 요일 헤더 -->
            <div class="calendar-grid mb-4 animate-slide-up">
                <div
                    class="p-2 sm:p-4 text-center font-bold text-red-500 text-sm sm:text-lg"
                >
                    일
                </div>
                <div
                    class="p-2 sm:p-4 text-center font-bold text-gray-700 text-sm sm:text-lg"
                >
                    월
                </div>
                <div
                    class="p-2 sm:p-4 text-center font-bold text-gray-700 text-sm sm:text-lg"
                >
                    화
                </div>
                <div
                    class="p-2 sm:p-4 text-center font-bold text-gray-700 text-sm sm:text-lg"
                >
                    수
                </div>
                <div
                    class="p-2 sm:p-4 text-center font-bold text-gray-700 text-sm sm:text-lg"
                >
                    목
                </div>
                <div
                    class="p-2 sm:p-4 text-center font-bold text-gray-700 text-sm sm:text-lg"
                >
                    금
                </div>
                <div
                    class="p-2 sm:p-4 text-center font-bold text-blue-500 text-sm sm:text-lg"
                >
                    토
                </div>
            </div>

            <!-- 캘린더 그리드 -->
            <div
                id="calendarGrid"
                class="calendar-grid glass-effect rounded-2xl overflow-hidden floating-card animate-bounce-in"
            >
                <!-- JavaScript로 동적 생성 -->
            </div>
        </div>

        <!-- 일정 등록 요청 모달 -->
        <div
            id="eventRequestModal"
            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4"
        >
            <div
                class="bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[90vh] overflow-y-auto"
            >
                <div class="p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h3 class="text-xl font-bold text-gray-800">
                            일정 등록 요청
                        </h3>
                        <button
                            id="closeModalBtn"
                            class="text-gray-400 hover:text-gray-600 transition-colors"
                        >
                            <svg
                                class="w-6 h-6"
                                fill="none"
                                stroke="currentColor"
                                viewBox="0 0 24 24"
                            >
                                <path
                                    stroke-linecap="round"
                                    stroke-linejoin="round"
                                    stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12"
                                ></path>
                            </svg>
                        </button>
                    </div>

                    <form id="eventRequestForm" class="space-y-4">
                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 mb-2"
                                >작성자명 *</label
                            >
                            <input
                                type="text"
                                id="requester"
                                name="requester"
                                required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            />
                        </div>

                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 mb-2"
                                >요청일자 *</label
                            >
                            <input
                                type="text"
                                id="eventDate"
                                name="eventDate"
                                required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                                placeholder="YYYY-MM-DD 형식으로 입력"
                            />
                        </div>

                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 mb-2"
                                >브랜드&팀명 *</label
                            >
                            <input
                                type="text"
                                id="company"
                                name="company"
                                required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            />
                        </div>

                        <!-- 브랜드&팀별 색상 범례 -->
                        <div
                            class="bg-gray-50 rounded-lg p-3 border border-gray-200"
                        >
                            <p class="text-xs font-medium text-gray-700 mb-2">
                                브랜드&팀별 색상 안내
                            </p>
                            <div class="grid grid-cols-2 gap-2 text-xs">
                                <div class="flex items-center space-x-2">
                                    <div
                                        class="w-3 h-3 bg-red-500 rounded-full"
                                    ></div>
                                    <span class="text-gray-600">회사전체</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div
                                        class="w-3 h-3 bg-blue-500 rounded-full"
                                    ></div>
                                    <span class="text-gray-600">압타밀</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div
                                        class="w-3 h-3 bg-gray-800 rounded-full"
                                    ></div>
                                    <span class="text-gray-600">드리미</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div
                                        class="w-3 h-3 bg-yellow-500 rounded-full"
                                    ></div>
                                    <span class="text-gray-600">BT몰</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div
                                        class="w-3 h-3 bg-pink-500 rounded-full"
                                    ></div>
                                    <span class="text-gray-600">고객센터</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div
                                        class="w-3 h-3 bg-cyan-500 rounded-full"
                                    ></div>
                                    <span class="text-gray-600">마케팅</span>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <div
                                        class="w-3 h-3 bg-lime-500 rounded-full"
                                    ></div>
                                    <span class="text-gray-600">컨텐츠</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 mb-2"
                                >제목 *</label
                            >
                            <input
                                type="text"
                                id="eventTitle"
                                name="eventTitle"
                                required
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            />
                        </div>

                        <div>
                            <label
                                class="block text-sm font-medium text-gray-700 mb-2"
                                >상세설명</label
                            >
                            <textarea
                                id="eventDescription"
                                name="eventDescription"
                                rows="3"
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                            ></textarea>
                        </div>

                        <div class="flex space-x-3 pt-4">
                            <button
                                type="button"
                                id="cancelBtn"
                                class="flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
                            >
                                취소
                            </button>
                            <button
                                type="submit"
                                class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                            >
                                요청하기
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- 로딩 오버레이 -->
        <div
            id="loadingOverlay"
            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center"
        >
            <div class="bg-white rounded-lg p-6 flex items-center space-x-3">
                <div
                    class="animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"
                ></div>
                <span class="text-gray-700">처리 중...</span>
            </div>
        </div>

        <!-- 완료 메시지 모달 -->
        <div
            id="successModal"
            class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4"
        >
            <div
                class="bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 text-center"
            >
                <div
                    class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4"
                >
                    <svg
                        class="w-8 h-8 text-green-600"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            stroke-width="2"
                            d="M5 13l4 4L19 7"
                        ></path>
                    </svg>
                </div>
                <h3 class="text-xl font-bold text-gray-800 mb-2">접수 완료</h3>
                <p class="text-gray-600 mb-6">
                    일정 등록 요청이 성공적으로 접수되었습니다.
                </p>
                <button
                    id="closeSuccessModal"
                    class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"
                >
                    확인
                </button>
            </div>
        </div>

        <script>
            class CompanyCalendar {
                constructor() {
                    this.currentDate = new Date();
                    this.events = {}; // 날짜별 매핑
                    this.currentTooltip = null;
                    this.init();
                }

                async init() {
                    try {
                        await this.loadAllEvents();
                        this.renderCalendar();
                        this.bindEvents();
                        this.renderImportantAndTodayBox();
                        this.bindModalEvents();
                    } catch (error) {
                        console.error("캘린더 초기화 오류:", error);
                    }
                }

                // events.json에서 모든 일정 불러와 날짜별로 매핑
                async loadAllEvents() {
                    try {
                        const response = await fetch("events.json");
                        if (!response.ok)
                            throw new Error(
                                "일정 데이터를 불러올 수 없습니다."
                            );
                        const data = await response.json();
                        this.events = {};
                        data.events.forEach((event) => {
                            // 날짜를 정확하게 파싱 (시간대 문제 해결)
                            const eventDate = new Date(
                                event.date + "T00:00:00"
                            );
                            const dateString = this.formatDate(eventDate);

                            if (!this.events[dateString])
                                this.events[dateString] = [];
                            this.events[dateString].push(event);
                        });
                        console.log("로드된 이벤트:", this.events);
                    } catch (error) {
                        console.error("일정 데이터 로드 오류:", error);
                        this.events = {};
                    }
                }

                // 상단 중요 일정 & 오늘의 일정 알림 박스 렌더링
                renderImportantAndTodayBox() {
                    // 모든 중요 일정 수집 (important: true)
                    const todayString = this.formatDate(new Date());
                    let importantEvents = [];

                    Object.keys(this.events).forEach((date) => {
                        this.events[date].forEach((ev) => {
                            if (ev.important) {
                                importantEvents.push({ ...ev, date });
                            }
                        });
                    });

                    // 날짜 순으로 정렬 (가까운 날짜부터)
                    importantEvents.sort(
                        (a, b) => new Date(a.date) - new Date(b.date)
                    );

                    // 오늘의 일정 알림
                    const todayEvents = this.events[todayString] || [];

                    // 중요 일정 영역 DOM
                    const box = document.querySelector(
                        ".glass-effect.rounded-xl"
                    );
                    if (!box) return;
                    box.innerHTML = `
                        <div class="flex justify-between items-center mb-4 sm:mb-6">
                            <h2 class="text-xl sm:text-2xl font-bold text-gray-800 flex items-center">
                                <div class="w-6 h-6 sm:w-8 sm:h-8 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center mr-2 sm:mr-3 shadow-sm">
                                    <svg class="w-4 h-4 sm:w-5 sm:h-5 text-white" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                                    </svg>
                                </div>
                                중요 일정 & 오늘의 일정 알림
                            </h2>
                            <button id="requestEventBtn" class="px-4 py-2 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-semibold text-sm hover:from-blue-600 hover:to-blue-700 transition-all duration-300 shadow-sm flex items-center space-x-2">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                </svg>
                                <span>일정 등록 요청</span>
                            </button>
                        </div>
                        <div class="mb-6">
                            <h3 class="text-lg font-semibold text-gray-700 mb-3 flex items-center">
                                <svg class="w-5 h-5 mr-2 text-orange-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                                </svg>
                                중요 일정
                            </h3>
                            <div class="space-y-3">
                                ${
                                    importantEvents.length > 0
                                        ? importantEvents
                                              .map(
                                                  (event) => `
                                <div class="flex items-start space-x-3 p-3 bg-orange-50 rounded-lg border border-orange-200 shadow-sm">
                                    <div class="w-2 h-2 bg-gradient-to-r from-orange-400 to-red-500 rounded-full mt-1.5 flex-shrink-0 animate-pulse-slow"></div>
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-1">
                                            <p class="font-semibold text-gray-800 text-sm">${this.escapeHtml(
                                                event.title
                                            )}</p>
                                            <span class="text-xs text-gray-500 ml-2 flex-shrink-0">${
                                                event.date
                                            }</span>
                                        </div>
                                        <p class="text-gray-600 text-xs">${this.escapeHtml(
                                            event.description || ""
                                        )}</p>
                                    </div>
                                </div>`
                                              )
                                              .join("")
                                        : `<div class="text-gray-400 text-sm">중요 일정이 없습니다.</div>`
                                }
                            </div>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold text-gray-700 mb-3 flex items-center justify-between">
                                <div class="flex items-center">
                                    <svg class="w-5 h-5 mr-2 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                                    </svg>
                                    오늘의 일정 알림
                                </div>
                                <span class="text-xs text-gray-500 font-normal">매일 오전 08시 자동으로 팀룸에 전송됩니다.</span>
                            </h3>
                            <div id="todayEventsList" class="space-y-3">
                                ${
                                    todayEvents.length === 0
                                        ? `<div class="text-center py-4 text-gray-500"><svg class="w-8 h-8 mx-auto mb-2 text-gray-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><p class="text-sm">오늘의 일정 알림이 없습니다.</p></div>`
                                        : todayEvents
                                              .map((event) => {
                                                  const typeColors = {
                                                      company: {
                                                          bg: "bg-red-50",
                                                          border: "border-red-200",
                                                          dot: "bg-red-500",
                                                          tag: "bg-red-100 text-red-800",
                                                      },
                                                      aptamil: {
                                                          bg: "bg-blue-50",
                                                          border: "border-blue-200",
                                                          dot: "bg-blue-500",
                                                          tag: "bg-blue-100 text-blue-800",
                                                      },
                                                      dreame: {
                                                          bg: "bg-orange-50",
                                                          border: "border-orange-200",
                                                          dot: "bg-orange-500",
                                                          tag: "bg-orange-100 text-orange-800",
                                                      },
                                                      brighton: {
                                                          bg: "bg-yellow-50",
                                                          border: "border-yellow-200",
                                                          dot: "bg-yellow-500",
                                                          tag: "bg-yellow-100 text-yellow-800",
                                                      },
                                                      customer: {
                                                          bg: "bg-pink-50",
                                                          border: "border-pink-200",
                                                          dot: "bg-pink-500",
                                                          tag: "bg-pink-100 text-pink-800",
                                                      },
                                                      marketing: {
                                                          bg: "bg-cyan-50",
                                                          border: "border-cyan-200",
                                                          dot: "bg-cyan-500",
                                                          tag: "bg-cyan-100 text-cyan-800",
                                                      },
                                                      content: {
                                                          bg: "bg-lime-50",
                                                          border: "border-lime-200",
                                                          dot: "bg-lime-500",
                                                          tag: "bg-lime-100 text-lime-800",
                                                      },
                                                  };
                                                  const colors =
                                                      typeColors[event.type] ||
                                                      typeColors.company;

                                                  return `
                                    <div class="flex items-start space-x-3 p-3 ${
                                        colors.bg
                                    } rounded-lg border ${
                                                      colors.border
                                                  } shadow-sm">
                                        <div class="w-2 h-2 ${
                                            colors.dot
                                        } rounded-full mt-1.5 flex-shrink-0"></div>
                                        <div class="flex-1 min-w-0">
                                            <div class="flex items-center justify-between mb-1">
                                                <h4 class="font-semibold text-gray-800 text-sm truncate">${this.escapeHtml(
                                                    event.title
                                                )}</h4>
                                                <span class="text-xs text-gray-500 ml-2 flex-shrink-0">${
                                                    event.time || ""
                                                }</span>
                                            </div>
                                            <p class="text-xs text-gray-600 mb-2 line-clamp-2">${this.escapeHtml(
                                                event.description || ""
                                            )}</p>
                                            <div class="flex items-center space-x-2">
                                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${
                                                    colors.tag
                                                }">${this.escapeHtml(
                                                      event.type
                                                  )}</span>
                                            </div>
                                        </div>
                                    </div>
                                    `;
                                              })
                                              .join("")
                                }
                            </div>
                        </div>
                    `;
                }

                // 캘린더 렌더링 (날짜별로 events.json 데이터 사용)
                renderCalendar() {
                    try {
                        const year = this.currentDate.getFullYear();
                        const month = this.currentDate.getMonth();
                        const currentMonthElement =
                            document.getElementById("currentMonth");
                        if (currentMonthElement) {
                            currentMonthElement.textContent = `${year}년 ${
                                month + 1
                            }월`;
                        }
                        const firstDay = new Date(year, month, 1);
                        const startDate = new Date(firstDay);
                        const dayOfWeek = firstDay.getDay();
                        startDate.setDate(1 - dayOfWeek);
                        const calendarGrid =
                            document.getElementById("calendarGrid");
                        if (!calendarGrid) {
                            console.error(
                                "캘린더 그리드 요소를 찾을 수 없습니다."
                            );
                            return;
                        }
                        calendarGrid.innerHTML = "";
                        for (let i = 0; i < 42; i++) {
                            const currentDate = new Date(startDate);
                            currentDate.setDate(startDate.getDate() + i);
                            const dayElement = this.createDayElement(
                                currentDate,
                                year,
                                month
                            );
                            calendarGrid.appendChild(dayElement);
                        }
                    } catch (error) {
                        console.error("캘린더 렌더링 오류:", error);
                    }
                }

                createDayElement(date, currentYear, currentMonth) {
                    try {
                        const dayDiv = document.createElement("div");
                        dayDiv.className =
                            "calendar-day bg-white border border-gray-200 p-3 relative";
                        const isCurrentMonth = date.getMonth() === currentMonth;
                        const isToday = this.isToday(date);
                        const dateString = this.formatDate(date);
                        const dayEvents = this.events[dateString] || [];
                        let dayClass = "text-lg font-bold mb-3 ";
                        if (!isCurrentMonth) {
                            dayClass += "text-gray-400";
                        } else if (date.getDay() === 0) {
                            dayClass += "text-red-500";
                        } else if (date.getDay() === 6) {
                            dayClass += "text-blue-500";
                        } else {
                            dayClass += "text-gray-800";
                        }
                        if (isToday) {
                            dayDiv.classList.add(
                                "bg-blue-50",
                                "border-blue-300"
                            );
                            dayDiv.style.boxShadow =
                                "0 0 0 3px rgba(59, 130, 246, 0.1)";
                        }
                        const eventsHTML = dayEvents
                            .map((event) => {
                                const safeTitle = this.escapeHtml(event.title);
                                const safeType = this.escapeHtml(event.type);
                                const eventColor = this.getEventColor(
                                    event.type
                                );
                                // 드리미 브랜드인 경우 텍스트 색상을 하얀색으로 설정
                                const textColor =
                                    event.type === "dreame"
                                        ? "color: white;"
                                        : "";
                                return `<span class="event-tag" style="background-color: ${eventColor}; ${textColor}" data-event-title="${safeTitle}" data-event-description="${this.escapeHtml(
                                    event.description
                                )}" data-event-type="${safeType}">${safeTitle}</span>`;
                            })
                            .join("");
                        dayDiv.innerHTML = `
                            <div class="${dayClass}">${date.getDate()}</div>
                            <div class="space-y-2">${eventsHTML}</div>
                        `;
                        dayDiv.querySelectorAll(".event-tag").forEach((tag) => {
                            tag.addEventListener("mouseenter", (e) => {
                                const eventData = {
                                    title: e.target.dataset.eventTitle,
                                    description:
                                        e.target.dataset.eventDescription,
                                    type: e.target.dataset.eventType,
                                };
                                this.showTooltip(e, eventData);
                            });
                            tag.addEventListener("mouseleave", () => {
                                this.hideTooltip();
                            });
                        });
                        return dayDiv;
                    } catch (error) {
                        console.error("날짜 요소 생성 오류:", error);
                        const fallbackDiv = document.createElement("div");
                        fallbackDiv.className =
                            "calendar-day bg-white border border-gray-200 p-3 relative";
                        fallbackDiv.innerHTML = `<div class="text-lg font-bold mb-3 text-gray-800">
                            ${date.getDate()}</div>`;
                        return fallbackDiv;
                    }
                }

                showTooltip(event, eventData) {
                    try {
                        // 기존 툴크 제거
                        this.hideTooltip();

                        if (!eventData || !eventData.title) {
                            return;
                        }

                        const tooltip = document.createElement("div");
                        tooltip.className = "tooltip";

                        // 긴 텍스트를 적절히 줄바꿈 처리
                        const title = this.escapeHtml(eventData.title);
                        const description = this.escapeHtml(
                            eventData.description || ""
                        );

                        tooltip.innerHTML = `
                            <div style="font-weight: 600; margin-bottom: 4px; word-wrap: break-word;">${title}</div>
                            <div style="color: #d1d5db; font-size: 0.8rem; word-wrap: break-word;">${description}</div>
                        `;

                        document.body.appendChild(tooltip);

                        const rect = event.target.getBoundingClientRect();

                        // 간단한 위치 계산
                        let left = rect.left;
                        let top = rect.bottom + 5;

                        // 화면 경계 확인
                        if (left + 250 > window.innerWidth) {
                            left = window.innerWidth - 260;
                        }
                        if (top + 80 > window.innerHeight) {
                            top = rect.top - 85;
                        }

                        tooltip.style.left = left + "px";
                        tooltip.style.top = top + "px";

                        // 즉시 표시
                        tooltip.classList.add("show");
                        this.currentTooltip = tooltip;
                    } catch (error) {
                        console.error("툴크 표시 오류:", error);
                    }
                }

                hideTooltip() {
                    try {
                        if (
                            this.currentTooltip &&
                            this.currentTooltip.parentNode
                        ) {
                            this.currentTooltip.remove();
                        }
                        this.currentTooltip = null;
                    } catch (error) {
                        console.error("툴크 숨김 오류:", error);
                        this.currentTooltip = null;
                    }
                }

                isToday(date) {
                    try {
                        const today = new Date();
                        return date.toDateString() === today.toDateString();
                    } catch (error) {
                        console.error("오늘 날짜 확인 오류:", error);
                        return false;
                    }
                }

                formatDate(date) {
                    try {
                        // 시간대 문제 해결을 위해 로컬 날짜로 포맷
                        const year = date.getFullYear();
                        const month = String(date.getMonth() + 1).padStart(
                            2,
                            "0"
                        );
                        const day = String(date.getDate()).padStart(2, "0");
                        return `${year}-${month}-${day}`;
                    } catch (error) {
                        console.error("날짜 포맷 오류:", error);
                        return "";
                    }
                }

                bindEvents() {
                    try {
                        const prevBtn = document.getElementById("prevMonth");
                        const nextBtn = document.getElementById("nextMonth");
                        const todayBtn = document.getElementById("todayBtn");

                        if (prevBtn) {
                            prevBtn.addEventListener("click", () => {
                                const currentYear =
                                    this.currentDate.getFullYear();
                                const currentMonth =
                                    this.currentDate.getMonth();

                                if (currentMonth === 0) {
                                    // 1월에서 이전 월로 가면 작년 12월
                                    this.currentDate = new Date(
                                        currentYear - 1,
                                        11,
                                        1
                                    );
                                } else {
                                    // 그 외에는 이전 월의 1일로 설정
                                    this.currentDate = new Date(
                                        currentYear,
                                        currentMonth - 1,
                                        1
                                    );
                                }
                                this.renderCalendar();
                            });
                        }

                        if (nextBtn) {
                            nextBtn.addEventListener("click", () => {
                                const currentYear =
                                    this.currentDate.getFullYear();
                                const currentMonth =
                                    this.currentDate.getMonth();

                                if (currentMonth === 11) {
                                    // 12월에서 다음 월로 가면 내년 1월
                                    this.currentDate = new Date(
                                        currentYear + 1,
                                        0,
                                        1
                                    );
                                } else {
                                    // 그 외에는 다음 월의 1일로 설정
                                    this.currentDate = new Date(
                                        currentYear,
                                        currentMonth + 1,
                                        1
                                    );
                                }
                                this.renderCalendar();
                            });
                        }

                        if (todayBtn) {
                            todayBtn.addEventListener("click", () => {
                                this.currentDate = new Date();
                                this.renderCalendar();
                            });
                        }
                    } catch (error) {
                        console.error("이벤트 바인딩 오류:", error);
                    }
                }
                // 범례색상
                getEventColor(type) {
                    const colors = {
                        company: "#EF4444", // 회사전체 - 빨간색
                        aptamil: "#3B82F6", // 압타밀 - 파란색
                        dreame: "#1F2937", // 드리미 - 검은색
                        brighton: "#F59E0B", // bt몰 - 노란색
                        customer: "#EC4899", // 고객센터 - 핑크색
                        marketing: "#06B6D4", // 마케팅 - 청록색
                        content: "#84CC16", // 컨텐츠 - 연두색
                    };
                    return colors[type] || "#6b7280";
                }

                escapeHtml(str) {
                    return str
                        .replace(/&/g, "&amp;")
                        .replace(/</g, "&lt;")
                        .replace(/>/g, "&gt;")
                        .replace(/"/g, "&quot;")
                        .replace(/'/g, "&#39;");
                }

                // 모달 이벤트 바인딩
                bindModalEvents() {
                    const requestBtn =
                        document.getElementById("requestEventBtn");
                    const modal = document.getElementById("eventRequestModal");
                    const closeBtn = document.getElementById("closeModalBtn");
                    const cancelBtn = document.getElementById("cancelBtn");
                    const form = document.getElementById("eventRequestForm");
                    const loadingOverlay =
                        document.getElementById("loadingOverlay");
                    const successModal =
                        document.getElementById("successModal");
                    const closeSuccessBtn =
                        document.getElementById("closeSuccessModal");

                    // 모달 열기
                    if (requestBtn) {
                        requestBtn.addEventListener("click", () => {
                            this.openModal();
                        });
                    }

                    // 모달 닫기
                    if (closeBtn) {
                        closeBtn.addEventListener("click", () => {
                            this.closeModal();
                        });
                    }

                    if (cancelBtn) {
                        cancelBtn.addEventListener("click", () => {
                            this.closeModal();
                        });
                    }

                    // 모달 외부 클릭 시 닫기
                    if (modal) {
                        modal.addEventListener("click", (e) => {
                            if (e.target === modal) {
                                this.closeModal();
                            }
                        });
                    }

                    // 폼 제출
                    if (form) {
                        form.addEventListener("submit", (e) => {
                            e.preventDefault();
                            this.handleEventRequest();
                        });
                    }

                    // 성공 모달 닫기
                    if (closeSuccessBtn) {
                        closeSuccessBtn.addEventListener("click", () => {
                            this.closeSuccessModal();
                        });
                    }

                    // ESC 키로 모달 닫기
                    document.addEventListener("keydown", (e) => {
                        if (e.key === "Escape") {
                            this.closeModal();
                            this.closeSuccessModal();
                        }
                    });
                }

                // 모달 열기
                openModal() {
                    const modal = document.getElementById("eventRequestModal");
                    if (modal) {
                        modal.classList.remove("hidden");
                        // 오늘 날짜를 기본값으로 설정
                        const dateInput = document.getElementById("eventDate");
                        if (dateInput) {
                            dateInput.value = new Date()
                                .toISOString()
                                .split("T")[0];
                        }
                    }
                }

                // 모달 닫기
                closeModal() {
                    const modal = document.getElementById("eventRequestModal");
                    const form = document.getElementById("eventRequestForm");
                    if (modal) {
                        modal.classList.add("hidden");
                    }
                    if (form) {
                        form.reset();
                    }
                }

                // 성공 모달 닫기
                closeSuccessModal() {
                    const successModal =
                        document.getElementById("successModal");
                    if (successModal) {
                        successModal.classList.add("hidden");
                    }
                }

                // 일정 요청 처리
                async handleEventRequest() {
                    const form = document.getElementById("eventRequestForm");
                    const loadingOverlay =
                        document.getElementById("loadingOverlay");
                    const successModal =
                        document.getElementById("successModal");

                    if (!form) return;

                    const formData = new FormData(form);
                    const requestData = {
                        requester: formData.get("requester"),
                        eventDate: formData.get("eventDate"),
                        company: formData.get("company"),
                        eventTitle: formData.get("eventTitle"),
                        eventDescription: formData.get("eventDescription"),
                        requestTime: new Date().toISOString(),
                    };

                    // 확인 창
                    const confirmed = confirm("이대로 등록할까요?");
                    if (!confirmed) return;

                    try {
                        // 로딩 표시
                        if (loadingOverlay) {
                            loadingOverlay.classList.remove("hidden");
                        }

                        // 실제 API 호출 (여기서는 시뮬레이션)
                        await this.submitEventRequest(requestData);

                        // 모달 닫기
                        this.closeModal();

                        // 로딩 숨기기
                        if (loadingOverlay) {
                            loadingOverlay.classList.add("hidden");
                        }

                        // 성공 모달 표시
                        if (successModal) {
                            successModal.classList.remove("hidden");
                        }
                    } catch (error) {
                        console.error("일정 요청 처리 오류:", error);
                        alert("일정 요청 처리 중 오류가 발생했습니다.");

                        // 로딩 숨기기
                        if (loadingOverlay) {
                            loadingOverlay.classList.add("hidden");
                        }
                    }
                }

                // 일정 요청 제출
                async submitEventRequest(requestData) {
                    try {
                        console.log("일정 요청 데이터:", requestData);

                        // 로컬 테스트용 - 콘솔에 데이터 출력
                        console.log("=== 일정 요청 데이터 ===");
                        console.log("작성자:", requestData.requester);
                        console.log("요청일자:", requestData.eventDate);
                        console.log("브랜드&팀명:", requestData.company);
                        console.log("제목:", requestData.eventTitle);
                        console.log("상세설명:", requestData.eventDescription);
                        console.log("요청시간:", requestData.requestTime);
                        console.log("========================");

                        // Google Apps Script URL (배포 후 사용)
                        const googleAppsScriptUrl =
                            "https://script.google.com/macros/s/AKfycbyHKz5ifKNtN0THatC93x5h2Y8BSpPUbBUXIZh9m9U9AzF5ARD21riSIKR_H-_pi3Oi/exec";

                        // 실제 배포된 URL이 있을 때만 호출
                        if (googleAppsScriptUrl !== "YOUR_DEPLOYED_URL_HERE") {
                            const response = await fetch(googleAppsScriptUrl, {
                                method: "POST",
                                mode: "no-cors",
                                headers: {
                                    "Content-Type": "text/plain",
                                },
                                body: JSON.stringify(requestData),
                            });
                        }

                        // 성공 응답
                        return {
                            success: true,
                            message:
                                "일정 등록 요청이 성공적으로 접수되었습니다.",
                        };
                    } catch (error) {
                        console.error("일정 요청 처리 오류:", error);
                        throw error;
                    }
                }
            }

            // 캘린더 초기화
            document.addEventListener("DOMContentLoaded", () => {
                try {
                    const calendar = new CompanyCalendar();
                    window.calendar = calendar;
                } catch (error) {
                    console.error("캘린더 초기화 실패:", error);
                    // 사용자에게 오류 메시지 표시
                    const container = document.querySelector(".container");
                    if (container) {
                        container.innerHTML = `
                            <div class="text-center py-8">
                                <h2 class="text-xl font-bold text-red-600 mb-4">캘린더 로드 오류</h2>
                                <p class="text-gray-600">페이지를 새로고침해주세요.</p>
                            </div>
                        `;
                    }
                }
            });
        </script>
    </body>
</html>
